---
title: 网络配置三种模式对比（桥接模式，主机模式，网络地址转换）
date: 2020-08-27 18:29:58
tags:
- linux
---

# VMware三种网络模式简介

​    VMWare提供了三种工作模式，它们是bridged(桥接模式)、NAT(网络地址转换模式)和host-only(主机模式)。安装好虚拟机以后，在网络连接里面可以看到多了两块网卡。如下图。

# 1 bridged(桥接模式)

## 1.1 模式简介

　　在这种模式下，VMWare虚拟出来的操作系统就像是局域网中的一台独立的主机，它可以访问网内任何一台机器。  　　在桥接模式下，你需要手工为虚拟系统配置IP地址、子网掩码，而且还要和[宿主机](https://cloud.tencent.com/product/cdh?from=10680)器处于同一网段，这样虚拟系统才能和宿主机器进行通信。同时，由 于这个虚拟系统是局域网中的一个独立的主机系统，那么就可以手工配置它的TCP/IP配置信息，以实现通过局域网的网关或路由器访问互联网。  　　使用桥接模式的虚拟系统和宿主机器的关系，就像连接在同一个Hub上的两台电脑。想让它们相互通讯，你就需要为虚拟系统配置IP地址和子网掩码，否则就无法通信。    

## 1.2 工作的虚拟网卡

​    bridged模式下的VMnet0虚拟网络    

## 1.3 架构图

1）使用VMnet0虚拟交换机，此时虚拟机相当与网络上的一台独立计算机与主机一样，拥有一个独立的IP地址。使用**桥接方式**，A，A1，A2，B可互访。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi5jxbkbk6j30ir0a00ta.jpg)

2）虚拟机就像一台真正的计算机一样，直接连接到实际的网络上，可以理解为与宿主机没有任何联系。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi5jzb54q3j30ig08caam.jpg)

## 1.4 使用范围

​    1）如果你想利用VMWare在局域网内新建一个虚拟服务器，为局域网用户提供网络服务，就应该选择桥接模式。      2）如果你有路由器的话，那么就可以使用桥接方式上网，因为此时你申请的IP地址是写在了路由器上，而不是你的机器上，这样包括你的主机，虚拟机，也包括 连在路由器上的其他人的机器，都将可以上网，使用着由路由器分配的IP地址。  

# 2 host-only(主机模式)

## 2.1 模式简介

​    在某些特殊的网络调试环境中，要求将真实环境和虚拟环境隔离开，这时你就可采用host-only模式。在host-only模式中，所有的虚拟系统是可以相互通信的，但虚拟系统和真实的网络是被隔离开的。  　　提示：在host-only模式下，虚拟系统和宿主机器系统是可以相互通信的，相当于这两台机器通过双绞线互连。  　　在host-only模式下，虚拟系统的TCP/IP配置信息(如IP地址、网关地址、DNS服务器等)，都是由VMnet1(host-only)虚拟网络的DHCP服务器来动态分配的。  　　如果你想利用VMWare创建一个与网内其他机器相隔离的虚拟系统，进行某些特殊的网络调试工作，可以选择host-only模式。    [Linux虚拟机实现Host-only方式上网](http://blog.csdn.net/suneqing/article/details/51787336)

## 2.2 工作的虚拟网卡

   host-only模式下的 VMnet1虚拟网络  

## 2.3 架构图

1）使用Vmnet1虚拟交换机，此时虚拟机只能与虚拟机、主机互访。也就是不能上Internet。使用Host方式，A，A1，A2可以互访，但A1，A2不能访问B，也不能被B访问。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi5jzy56yqj30h709ajs1.jpg)

2）这种方式下，虚拟机的网卡连接到宿主的 VMnet1 上，但系统并不为虚拟机提供任何路由服务，因此虚拟机只能和宿主机进行通信，而不能连接到实际网络上。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi5k09nm0nj30hb086dgg.jpg)

## 2.4 使用范围

   如果你想利用VMWare创建一个与网内其他机器相隔离的虚拟系统，进行某些特殊的网络调试工作，可以选择host-only模式。  

# 3 NAT(网络地址转换模式)

## 3.1 模式简介

​    使用NAT模式，就是让虚拟系统借助NAT(网络地址转换)功能，通过宿主机器所在的网络来访问公网。也就是说，使用NAT模式可以实现在虚拟 系统里访问互联网。NAT模式下的虚拟系统的TCP/IP配置信息是由VMnet8(NAT)虚拟网络的DHCP服务器提供的，无法进行手工修改，因此虚拟系统也就无法和本局域网中的其他真实主机进行通讯。采用NAT模式最大的优势是虚拟系统接入互联网非常简单，你不需要进行任何其他的配置，只需要宿主机 器能访问互联网即可。    

## 3.2 工作的虚拟网卡

   NAT模式下的VMnet8虚拟网络    

## 3.3 架构图

1） 使用Vmnet8虚拟交换机，此时虚拟机可以通过主机单向网络上的其他工作站，其他工作站不能访问虚拟机。用NAT方式，A1，A2可以访问B，但B不可以访问A1，A2。但A，A1，A2可以互访。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi5k0pewx6j30i909gaav.jpg)

2） 这种方式下，虚拟机的网卡连接到宿主的 VMnet8 上。此时系统的 VMWare NAT Service 服务就充当了路由器的作用，负责将虚拟机发到 VMnet8 的包进行地址转换之后发到实际的网络上，再将实际网络上返回的包进行地址转换后通过 VMnet8 发送给虚拟机。VMWare DHCP Service 负责为虚拟机提供 DHCP 服务。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gi5k0w2pqrj30hm0863z4.jpg)

## 3.4 使用范围

​    如果你想利用VMWare安装一个新的虚拟系统，在虚拟系统中不用进行任何手工配置就能直接访问互联网，建议你采用NAT模式。

# 参考

<https://blog.csdn.net/CleverCode/article/details/45934233>

